<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MNS Group - Portale Centrale</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: white;
        }

        .notifications {
            position: relative;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .notifications:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .welcome-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .welcome-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .welcome-subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #f0f0f0;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .systems-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .system-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }

        .system-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .system-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .system-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .system-icon {
            font-size: 2.5rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .system-info h3 {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 0.3rem;
        }

        .system-info p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .system-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .mini-stat {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .mini-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .mini-stat-label {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 0.3rem;
        }

        .action-buttons {
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .quick-actions {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .quick-actions h2 {
            margin-bottom: 1.5rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quick-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .quick-action {
            background: white;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #333;
        }

        .quick-action:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .quick-action-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        .recent-activity {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .recent-activity h2 {
            margin-bottom: 1.5rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.8rem;
            background: white;
            border: 1px solid #f0f0f0;
            transition: all 0.3s ease;
        }

        .activity-item:hover {
            background: #f8f9fa;
            border-color: #667eea;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.2rem;
        }

        .activity-description {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .activity-time {
            color: #bdc3c7;
            font-size: 0.8rem;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .systems-grid {
                grid-template-columns: 1fr;
            }

            .header-content {
                padding: 0 1rem;
            }

            .welcome-title {
                font-size: 1.5rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn-primary, .btn-secondary {
                text-align: center;
                justify-content: center;
            }
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .status-active {
            background: #2ecc71;
        }

        .status-warning {
            background: #f39c12;
        }

        .status-error {
            background: #e74c3c;
        }

        .search-bar {
            width: 100%;
            padding: 1rem;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            font-size: 1rem;
            margin-bottom: 2rem;
            background: white;
            transition: all 0.3s ease;
        }

        .search-bar:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: #2c3e50;
        }

        .users-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .user-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-card:hover {
            border-color: #667eea;
            background: #e8f0ff;
            transform: translateY(-3px);
        }

        .user-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 1rem auto;
        }

        .user-card.selected .user-avatar {
            background: rgba(255, 255, 255, 0.2);
        }

        .user-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .user-role {
            font-size: 0.8rem;
            color: #7f8c8d;
        }

        .user-card.selected .user-role {
            color: rgba(255, 255, 255, 0.8);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                üèõÔ∏è MNS Group - Portale Centrale
            </div>
            <div class="user-info">
                <div class="notifications" onclick="showNotifications()">
                    üîî
                    <span class="notification-badge" id="notificationCount">3</span>
                </div>
                <span id="welcomeMessage">Seleziona Utente</span>
                <div id="userAvatar" style="width: 40px; height: 40px; border-radius: 50%; background: #95a5a6; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer;" onclick="showUserMenu()">?</div>
            </div>
        </div>
    </header>

    <!-- Modal Selezione Utente -->
    <div id="userModal" class="modal" style="display: block;">
        <div class="modal-content">
            <h2>üë• Seleziona il tuo profilo</h2>
            <div class="users-grid">
                <div class="user-card" onclick="selectUser('gianluca')">
                    <div class="user-avatar">GM</div>
                    <div class="user-name">Gianluca</div>
                    <div class="user-role">Amministratore di Sistema</div>
                </div>
                <div class="user-card" onclick="selectUser('simone')">
                    <div class="user-avatar">SM</div>
                    <div class="user-name">Simone</div>
                    <div class="user-role">Socio Senior</div>
                </div>
                <div class="user-card" onclick="selectUser('andrea')">
                    <div class="user-avatar">AP</div>
                    <div class="user-name">Andrea</div>
                    <div class="user-role">Socio Senior</div>
                </div>
                <div class="user-card" onclick="selectUser('nicola')">
                    <div class="user-avatar">NP</div>
                    <div class="user-name">Nicola</div>
                    <div class="user-role">Socio Senior</div>
                </div>
                <div class="user-card" onclick="selectUser('gabriele')">
                    <div class="user-avatar">GP</div>
                    <div class="user-name">Gabriele</div>
                    <div class="user-role">Socio Senior</div>
                </div>
            </div>
            <div style="text-align: center;">
                <button onclick="closeModal()" style="background: #667eea; color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-weight: 600;">
                    üöÄ Accedi al Portale
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="welcome-section">
            <h1 class="welcome-title">üéØ Dashboard Operativa MNS Group</h1>
            <p class="welcome-subtitle">Accesso unificato a tutti i sistemi aziendali ‚Ä¢ Ultimo aggiornamento: <span id="currentTime"></span></p>
            
            <input type="text" class="search-bar" placeholder="üîç Ricerca globale in tutti i sistemi..." onkeyup="globalSearch(this.value)">
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalDomande">127</div>
                    <div class="stat-label">Domande Attive Totali</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalClienti">65</div>
                    <div class="stat-label">Clienti Aziendali</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalScadenze">15</div>
                    <div class="stat-label">Scadenze Team</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalValore">‚Ç¨ 7.8M</div>
                    <div class="stat-label">Valore Portfolio Totale</div>
                </div>
            </div>
        </div>

        <div class="systems-grid">
            <div class="system-card">
                <div class="system-header">
                    <div class="system-icon">üèõÔ∏è</div>
                    <div class="system-info">
                        <h3><span class="status-indicator status-active"></span>CRM Marchi EUTM</h3>
                        <p>Gestione completa processi registrazione marchi</p>
                    </div>
                </div>
                <div class="system-stats">
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="crmDomande">127</div>
                        <div class="mini-stat-label">Domande Totali</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="crmScadenze">15</div>
                        <div class="mini-stat-label">Scadenze Team</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="https://gianlucamadeddu.github.io/mns-crm-marchi/" target="_blank" class="btn-primary">
                        üöÄ Apri CRM
                    </a>
                    <a href="#" onclick="showCrmStats()" class="btn-secondary">
                        üìä Statistiche
                    </a>
                </div>
            </div>

            <div class="system-card">
                <div class="system-header">
                    <div class="system-icon">üí∞</div>
                    <div class="system-info">
                        <h3><span class="status-indicator status-active"></span>Sistema Perizie</h3>
                        <p>Valutazione economica marchi - Relief from Royalty</p>
                    </div>
                </div>
                <div class="system-stats">
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="perizieAttive">28</div>
                        <div class="mini-stat-label">Perizie Attive</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="valoreMedia">‚Ç¨1.8M</div>
                        <div class="mini-stat-label">Valore Medio</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="https://gianlucamadeddu.github.io/sistema-perizie-marchi/" target="_blank" class="btn-primary">
                        üíé Nuova Perizia
                    </a>
                    <a href="#" onclick="showPerizieReport()" class="btn-secondary">
                        üìà Report
                    </a>
                </div>
            </div>

            <div class="system-card">
                <div class="system-header">
                    <div class="system-icon">üéì</div>
                    <div class="system-info">
                        <h3><span class="status-indicator status-warning"></span>Portale Formazione</h3>
                        <p>Learning interno soci - 7 moduli disponibili</p>
                    </div>
                </div>
                <div class="system-stats">
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="completamentoMedio">71%</div>
                        <div class="mini-stat-label">Completamento Medio</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="moduliRimasti">2.1</div>
                        <div class="mini-stat-label">Moduli Medi Rimasti</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="https://gianlucamadeddu.github.io/mns-portal/" target="_blank" class="btn-primary">
                        üìö Continua Corso
                    </a>
                    <a href="#" onclick="showLearningProgress()" class="btn-secondary">
                        üèÜ Progressi Team
                    </a>
                </div>
            </div>

            <div class="system-card">
                <div class="system-header">
                    <div class="system-icon">üë•</div>
                    <div class="system-info">
                        <h3><span class="status-indicator status-active"></span>Anagrafica Clienti</h3>
                        <p>Database clienti con sync Firebase Cloud</p>
                    </div>
                </div>
                <div class="system-stats">
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="clientiTotali">65</div>
                        <div class="mini-stat-label">Clienti Attivi</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="nuoviMese">12</div>
                        <div class="mini-stat-label">Nuovi Questo Mese</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="https://gianlucamadeddu.github.io/anagrafica-clienti/" target="_blank" class="btn-primary">
                        üë§ Gestisci Clienti
                    </a>
                    <a href="#" onclick="exportClients()" class="btn-secondary">
                        üì§ Esporta Dati
                    </a>
                </div>
            </div>
       <div class="system-card">
                <div class="system-header">
                    <div class="system-icon">üìÖ</div>
                    <div class="system-info">
                        <h3><span class="status-indicator status-active"></span>Calendario Aziendale</h3>
                        <p>Gestione eventi e riunioni MNS Group</p>
                    </div>
                </div>
                <div class="system-stats">
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="eventiOggi">3</div>
                        <div class="mini-stat-label">Eventi Oggi</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value" id="riunioniSettimana">8</div>
                        <div class="mini-stat-label">Riunioni Settimana</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <a href="https://gianlucamadeddu.github.io/mns-group-calendar/" target="_blank" class="btn-primary">
                        üìä Dashboard Calendario
                    </a>
                    <a href="https://calendar.google.com/calendar/u/0/r/eventedit" target="_blank" class="btn-secondary">
                        ‚ûï Nuovo Evento
                    </a>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <h2>‚ö° Azioni Rapide</h2>
            <div class="quick-grid">
                <a href="#" onclick="newClient()" class="quick-action">
                    <span class="quick-action-icon">üë§</span>
                    <div>Nuovo Cliente</div>
                </a>
                <a href="#" onclick="newTrademark()" class="quick-action">
                    <span class="quick-action-icon">üèõÔ∏è</span>
                    <div>Nuova Domanda</div>
                </a>
                <a href="#" onclick="newPerizia()" class="quick-action">
                    <span class="quick-action-icon">üí∞</span>
                    <div>Nuova Perizia</div>
                </a>
                <a href="#" onclick="checkDeadlines()" class="quick-action">
                    <span class="quick-action-icon">‚è∞</span>
                    <div>Scadenze</div>
                </a>
                <a href="#" onclick="generateReport()" class="quick-action">
                    <span class="quick-action-icon">üìä</span>
                    <div>Report Mensile</div>
                </a>
                <a href="#" onclick="syncData()" class="quick-action">
                    <span class="quick-action-icon">üîÑ</span>
                    <div>Sincronizza Dati</div>
                </a>
            </div>
        </div>

        <div class="recent-activity">
            <h2>üìã Attivit√† Recenti</h2>
            <div class="activity-item">
                <div class="activity-icon">üèõÔ∏è</div>
                <div class="activity-content">
                    <div class="activity-title">Domanda EUTM "TechInnovate" depositata</div>
                    <div class="activity-description">Cliente: Innovatech Srl - Classi 9, 42</div>
                </div>
                <div class="activity-time">2 ore fa</div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">üí∞</div>
                <div class="activity-content">
                    <div class="activity-title">Perizia completata per marchio "EcoFuture"</div>
                    <div class="activity-description">Valore stimato: ‚Ç¨ 850.000</div>
                </div>
                <div class="activity-time">5 ore fa</div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">üë•</div>
                <div class="activity-content">
                    <div class="activity-title">Nuovo cliente aggiunto</div>
                    <div class="activity-description">Digital Solutions SpA - Portfolio 3 marchi</div>
                </div>
                <div class="activity-time">1 giorno fa</div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">‚ö†Ô∏è</div>
                <div class="activity-content">
                    <div class="activity-title">Scadenza rinnovo marchio "GreenTech"</div>
                    <div class="activity-description">Scadenza: 25 Agosto 2025</div>
                </div>
                <div class="activity-time">2 giorni fa</div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>¬© 2025 MNS Group - Portale Centrale Unificato | Build v2.0 | Tutti i sistemi operativi üöÄ</p>
    </footer>

    <script src="sync-config.js"></script>
    <script>
        // Sistema utenti MNS Group
        const users = {
            gianluca: {
                name: 'Gianluca',
                fullName: 'Gianluca Madeddu',
                avatar: 'GM',
                color: '#2ecc71',
                role: 'Amministratore di Sistema',
                stats: {
                    domandeAttive: 32,
                    clientiGestiti: 18,
                    scadenze: 5,
                    valorePortfolio: '‚Ç¨ 2.1M'
                },
                notifications: 5
            },
            simone: {
                name: 'Simone',
                fullName: 'Simone Marinello',
                avatar: 'SM',
                color: '#3498db',
                role: 'Socio Senior',
                stats: {
                    domandeAttive: 28,
                    clientiGestiti: 15,
                    scadenze: 3,
                    valorePortfolio: '‚Ç¨ 1.8M'
                },
                notifications: 3
            },
            andrea: {
                name: 'Andrea',
                fullName: 'Andrea Piga',
                avatar: 'AP',
                color: '#9b59b6',
                role: 'Socio Senior',
                stats: {
                    domandeAttive: 25,
                    clientiGestiti: 12,
                    scadenze: 2,
                    valorePortfolio: '‚Ç¨ 1.5M'
                },
                notifications: 2
            },
            nicola: {
                name: 'Nicola',
                fullName: 'Nicola Pellegrini',
                avatar: 'NP',
                color: '#e74c3c',
                role: 'Socio Senior',
                stats: {
                    domandeAttive: 22,
                    clientiGestiti: 11,
                    scadenze: 4,
                    valorePortfolio: '‚Ç¨ 1.3M'
                },
                notifications: 4
            },
            gabriele: {
                name: 'Gabriele',
                fullName: 'Gabriele Rossi',
                avatar: 'GP',
                color: '#f39c12',
                role: 'Socio Senior',
                stats: {
                    domandeAttive: 20,
                    clientiGestiti: 9,
                    scadenze: 1,
                    valorePortfolio: '‚Ç¨ 1.1M'
                },
                notifications: 1
            }
        };

        let currentUser = null;

        // Funzioni gestione utenti
        function selectUser(userId) {
            // Rimuovi selezione precedente
            document.querySelectorAll('.user-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Seleziona nuovo utente
            event.target.closest('.user-card').classList.add('selected');
            currentUser = users[userId];
            
            // Aggiorna interfaccia
            updateUserInterface();
        }

        function updateUserInterface() {
            if (!currentUser) return;

            // Aggiorna header
            document.getElementById('welcomeMessage').textContent = `Benvenuto, ${currentUser.name}`;
            const avatar = document.getElementById('userAvatar');
            avatar.textContent = currentUser.avatar;
            avatar.style.background = currentUser.color;

            // Aggiorna notifiche
            document.getElementById('notificationCount').textContent = currentUser.notifications;

            // Aggiorna statistiche dashboard
            const statCards = document.querySelectorAll('.stat-value');
            if (statCards.length >= 4) {
                statCards[0].textContent = currentUser.stats.domandeAttive;
                statCards[1].textContent = currentUser.stats.clientiGestiti;
                statCards[2].textContent = currentUser.stats.scadenze;
                statCards[3].textContent = currentUser.stats.valorePortfolio;
            }

            // Aggiorna attivit√† recenti per utente
            updateRecentActivities();
        }

        function updateRecentActivities() {
            const activities = {
                gianluca: [
                    { icon: 'üèõÔ∏è', title: 'Domanda EUTM "TechInnovate" depositata', desc: 'Cliente: Innovatech Srl - Classi 9, 42', time: '2 ore fa' },
                    { icon: 'üí∞', title: 'Perizia completata per marchio "EcoFuture"', desc: 'Valore stimato: ‚Ç¨ 850.000', time: '5 ore fa' },
                    { icon: 'üë•', title: 'Nuovo cliente aggiunto', desc: 'Digital Solutions SpA - Portfolio 3 marchi', time: '1 giorno fa' },
                    { icon: '‚ö†Ô∏è', title: 'Scadenza rinnovo marchio "GreenTech"', desc: 'Scadenza: 25 Agosto 2025', time: '2 giorni fa' }
                ],
                simone: [
                    { icon: 'üèõÔ∏è', title: 'Ricerca anteriorit√† completata "SmartFlow"', desc: 'Cliente: FlowTech Ltd - Nessun conflitto', time: '1 ora fa' },
                    { icon: 'üìã', title: 'Revisione domanda "DataCore"', desc: 'Correzioni richieste EUIPO - Classe 42', time: '4 ore fa' },
                    { icon: 'üí∞', title: 'Perizia avviata per "AgroTech"', desc: 'Metodologia Relief-from-Royalty', time: '6 ore fa' },
                    { icon: 'üë•', title: 'Meeting cliente TechStart', desc: 'Discusso strategia portfolio marchi', time: '1 giorno fa' }
                ],
                andrea: [
                    { icon: 'üí∞', title: 'Perizia "BioLife" in elaborazione', desc: 'Analisi settore farmaceutico - 67% completata', time: '30 min fa' },
                    { icon: 'üèõÔ∏è', title: 'Domanda EUTM "HealthTech" pubblicata', desc: 'Inizio periodo opposizione (3 mesi)', time: '3 ore fa' },
                    { icon: 'üìä', title: 'Report valutazione portfolio', desc: 'Cliente: MedDevice Inc - 5 marchi analizzati', time: '8 ore fa' },
                    { icon: '‚ö†Ô∏è', title: 'Opposizione ricevuta su "LifeScience"', desc: 'Analisi e risposta entro 2 mesi', time: '2 giorni fa' }
                ],
                nicola: [
                    { icon: 'üèõÔ∏è', title: 'Classificazione Nizza completata', desc: 'Marchio "EcoEnergy" - Classi 4, 7, 42', time: '45 min fa' },
                    { icon: 'üìã', title: 'Aggiornamento anagrafica cliente', desc: 'GreenPower Srl - Nuovi dati contatto', time: '2 ore fa' },
                    { icon: 'üí∞', title: 'Perizia "SolarTech" approvata', desc: 'Valore finale: ‚Ç¨ 1.250.000', time: '5 ore fa' },
                    { icon: 'üéì', title: 'Modulo formazione completato', desc: 'Procedure EUIPO avanzate - Certificato ottenuto', time: '1 giorno fa' }
                ],
                gabriele: [
                    { icon: 'üìã', title: 'Controllo distintivit√† "FutureApp"', desc: 'Verifica conformit√† normativa - Approvato', time: '20 min fa' },
                    { icon: 'üèõÔ∏è', title: 'Preparazione deposito "CloudTech"', desc: 'Documentazione completa - Pronto per invio', time: '1 ora fa' },
                    { icon: 'üë•', title: 'Primo contatto StartupTech', desc: 'Portfolio 2 marchi da registrare', time: '4 ore fa' },
                    { icon: 'üéì', title: 'Avanzamento formazione', desc: 'Modulo "Ricerca Anteriorit√†" - 75% completato', time: '6 ore fa' }
                ]
            };

            const container = document.querySelector('.recent-activity');
            const currentActivities = activities[Object.keys(users).find(key => users[key] === currentUser)] || activities.gianluca;
            
            let activityHTML = '<h2>üìã Attivit√† Recenti</h2>';
            currentActivities.forEach(activity => {
                activityHTML += `
                    <div class="activity-item">
                        <div class="activity-icon">${activity.icon}</div>
                        <div class="activity-content">
                            <div class="activity-title">${activity.title}</div>
                            <div class="activity-description">${activity.desc}</div>
                        </div>
                        <div class="activity-time">${activity.time}</div>
                    </div>
                `;
            });
            
            container.innerHTML = activityHTML;
        }

        function closeModal() {
            if (!currentUser) {
                alert('‚ö†Ô∏è Seleziona un utente prima di continuare');
                return;
            }
            document.getElementById('userModal').style.display = 'none';
        }

        function showUserMenu() {
            if (!currentUser) return;
            
            const userInfo = `
                üë§ ${currentUser.fullName}
                üìã ${currentUser.role}
                
                üîÑ Cambia Utente
                ‚öôÔ∏è Impostazioni
                üö™ Logout
            `;
            
            if (confirm(userInfo + '\n\nVuoi cambiare utente?')) {
                document.getElementById('userModal').style.display = 'block';
            }
        }

        // Aggiorna l'orario in tempo reale
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('it-IT', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Funzioni interattive aggiornate
        function showNotifications() {
            if (!currentUser) return;
            
            const notificationsList = {
                gianluca: 'üîî Notifiche Gianluca:\n\n‚Ä¢ 5 scadenze in arrivo questa settimana\n‚Ä¢ 3 nuove domande da processare\n‚Ä¢ 2 perizie completate\n‚Ä¢ Aggiornamento CRM disponibile\n‚Ä¢ Review mensile programmata',
                simone: 'üîî Notifiche Simone:\n\n‚Ä¢ 3 ricerche anteriorit√† completate\n‚Ä¢ 2 domande in fase di esame\n‚Ä¢ 1 cliente in attesa di risposta\n‚Ä¢ Formazione Advanced disponibile',
                andrea: 'üîî Notifiche Andrea:\n\n‚Ä¢ 2 perizie in scadenza questa settimana\n‚Ä¢ 1 opposizione da gestire\n‚Ä¢ Portfolio report completato\n‚Ä¢ Meeting cliente venerd√¨',
                nicola: 'üîî Notifiche Nicola:\n\n‚Ä¢ 4 classificazioni da completare\n‚Ä¢ 2 aggiornamenti anagrafica\n‚Ä¢ 1 perizia approvata\n‚Ä¢ Modulo formazione disponibile',
                gabriele: 'üîî Notifiche Gabriele:\n\n‚Ä¢ 1 controllo distintivit√† completato\n‚Ä¢ 2 depositi pronti\n‚Ä¢ Nuovo cliente da contattare\n‚Ä¢ Avanzamento formazione 75%'
            };
            
            const userKey = Object.keys(users).find(key => users[key] === currentUser);
            alert(notificationsList[userKey] || notificationsList.gianluca);
        }

        function globalSearch(query) {
            if (query.length > 2) {
                console.log(`Ricerca globale per ${currentUser?.name}: ${query}`);
            }
        }

        function showCrmStats() {
            if (!currentUser) return;
            alert(`üìä Statistiche CRM - ${currentUser.name}:\n\n‚Ä¢ ${currentUser.stats.domandeAttive} domande attive\n‚Ä¢ 89% tasso di successo\n‚Ä¢ Tempo medio processo: 45 giorni\n‚Ä¢ ${Math.floor(currentUser.stats.domandeAttive * 0.6)} domande in fase di esame`);
        }

        function showPerizieReport() {
            if (!currentUser) return;
            const perizie = Math.floor(currentUser.stats.domandeAttive * 0.4);
            alert(`üìà Report Perizie - ${currentUser.name}:\n\n‚Ä¢ ${perizie} perizie attive\n‚Ä¢ Valore medio: ‚Ç¨2.1M\n‚Ä¢ Tempo medio valutazione: 7 giorni\n‚Ä¢ 96% accuracy rating`);
        }

        function showLearningProgress() {
            const progress = {
                gianluca: `üèÜ Progressi Team (vista ${currentUser.name}):\n\n‚Ä¢ Gianluca: 85% (6/7 moduli)\n‚Ä¢ Simone: 78% (5.5/7 moduli)\n‚Ä¢ Andrea: 71% (5/7 moduli)\n‚Ä¢ Nicola: 67% (4.5/7 moduli)\n‚Ä¢ Gabriele: 54% (3.5/7 moduli)`,
                simone: 'üèÜ Progressi Personali:\n\n‚Ä¢ Completati: 5.5/7 moduli (78%)\n‚Ä¢ Prossimo: "Opposizioni Avanzate"\n‚Ä¢ Tempo stimato: 2 ore\n‚Ä¢ Certificazione: In corso',
                andrea: 'üèÜ Stato Formazione:\n\n‚Ä¢ Moduli completati: 5/7 (71%)\n‚Ä¢ Focus: Perizie e Valutazioni\n‚Ä¢ Specializzazione: Settore Medico\n‚Ä¢ Prossimo obiettivo: Expert Level',
                nicola: 'üèÜ Avanzamento Personale:\n\n‚Ä¢ Progresso: 4.5/7 moduli (67%)\n‚Ä¢ Area forte: Classificazioni Nizza\n‚Ä¢ Da migliorare: Ricerche Anteriorit√†\n‚Ä¢ Target: 80% entro fine mese',
                gabriele: 'üèÜ Percorso Formativo:\n\n‚Ä¢ Completamento: 3.5/7 moduli (54%)\n‚Ä¢ Modulo attuale: "Ricerca Anteriorit√†"\n‚Ä¢ Velocit√†: Sopra la media\n‚Ä¢ Obiettivo: Certificazione Q4'
            };
            
            const userKey = Object.keys(users).find(key => users[key] === currentUser);
            alert(progress[userKey] || progress.gianluca);
        }

        function exportClients() {
            if (!currentUser) return;
            alert(`üì§ Esportazione Clienti - ${currentUser.name}:\n\nGenerando file Excel con:\n‚Ä¢ ${currentUser.stats.clientiGestiti} clienti gestiti\n‚Ä¢ Dati di contatto completi\n‚Ä¢ Portfolio marchi per cliente\n‚Ä¢ Storico operazioni`);
        }

        function newClient() {
            window.open('https://gianlucamadeddu.github.io/anagrafica-clienti/', '_blank');
        }

        function newTrademark() {
            window.open('https://gianlucamadeddu.github.io/mns-crm-marchi/', '_blank');
        }

        function newPerizia() {
            window.open('https://gianlucamadeddu.github.io/sistema-perizie-marchi/', '_blank');
        }

        function checkDeadlines() {
            if (!currentUser) return;
            
            const deadlines = {
                gianluca: '‚è∞ Scadenze Imminenti (Gianluca):\n\n‚Ä¢ 25/08: Rinnovo GreenTech\n‚Ä¢ 28/08: Opposizione TechFlow\n‚Ä¢ 02/09: Deposito EcoLife\n‚Ä¢ 05/09: Esame FutureApp\n‚Ä¢ 10/09: Meeting TechInnovate',
                simone: '‚è∞ Scadenze Imminenti (Simone):\n\n‚Ä¢ 26/08: Ricerca SmartFlow\n‚Ä¢ 30/08: Revisione DataCore\n‚Ä¢ 03/09: Report TechStart\n‚Ä¢ 07/09: Formazione Advanced',
                andrea: '‚è∞ Scadenze Imminenti (Andrea):\n\n‚Ä¢ 24/08: Perizia BioLife\n‚Ä¢ 27/08: Risposta opposizione LifeScience\n‚Ä¢ 01/09: Report MedDevice\n‚Ä¢ 08/09: Analisi portfolio HealthTech',
                nicola: '‚è∞ Scadenze Imminenti (Nicola):\n\n‚Ä¢ 23/08: Classificazione EcoEnergy\n‚Ä¢ 29/08: Aggiornamento GreenPower\n‚Ä¢ 04/09: Certificazione formazione\n‚Ä¢ 11/09: Review processi',
                gabriele: '‚è∞ Scadenze Imminenti (Gabriele):\n\n‚Ä¢ 22/08: Deposito CloudTech\n‚Ä¢ 26/08: Contatto StartupTech\n‚Ä¢ 31/08: Modulo Ricerca Anteriorit√†\n‚Ä¢ 06/09: Controllo distintivit√† batch'
            };
            
            const userKey = Object.keys(users).find(key => users[key] === currentUser);
            alert(deadlines[userKey] || deadlines.gianluca);
        }

        function generateReport() {
            if (!currentUser) return;
            alert(`üìä Generazione Report Mensile - ${currentUser.name}:\n\n‚Ä¢ KPI operativi personali\n‚Ä¢ Analisi portfolio clienti gestiti\n‚Ä¢ Performance vs obiettivi\n‚Ä¢ Proiezioni trimestre\n\nTempo stimato: 2 minuti`);
        }

        function syncData() {
            if (!currentUser) return;
            alert(`üîÑ Sincronizzazione Dati - ${currentUser.name}:\n\n‚úÖ CRM Marchi ‚Üí Aggiornato\n‚úÖ Sistema Perizie ‚Üí Sincronizzato\n‚úÖ Anagrafica Clienti ‚Üí Allineata\n‚úÖ Portale Formazione ‚Üí Aggiornato\n\nüìä Dashboard aggiornata con ultimi dati`);
            
            // Simula aggiornamento dati
            setTimeout(() => {
                updateUserInterface();
                alert('‚ú® Sincronizzazione completata!');
            }, 2000);
        }

        // Inizializza la pagina
        updateTime();
        setInterval(updateTime, 60000);

        // Simulazione dati real-time personalizzati per utente
        setInterval(() => {
            if (!currentUser) return;
            
            // Piccole variazioni casuali nei dati utente
            const variation = Math.random() > 0.8 ? (Math.random() > 0.5 ? 1 : -1) : 0;
            if (variation !== 0) {
                currentUser.stats.domandeAttive = Math.max(1, currentUser.stats.domandeAttive + variation);
                updateUserInterface();
            }
        }, 45000);

        // Animazioni al caricamento
        window.addEventListener('load', () => {
            const cards = document.querySelectorAll('.system-card, .stat-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>
